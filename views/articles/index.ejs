<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />

    <link
      href="https://cdn.jsdelivr.net/gh/gitbrent/bootstrap4-toggle@3.6.1/css/bootstrap4-toggle.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/gh/gitbrent/bootstrap4-toggle@3.6.1/js/bootstrap4-toggle.min.js"></script>

    <base href="/" />
    <link type="text/css" rel="stylesheet" href="./styles/myStyle.css" />
    <title>Blog</title>
  </head>
  <body>
    <%- include('_header') %>
    <div class="container">
      <h1 class="mt-2 mb-4">Markdown Blog</h1>
      <a href="/articles/new" class="btn btn-success" role="button"
        ><i class="fa fa-plus"></i> New Article</a
      >
      <a href="<%= path %>" class="btn btn-info" id="sortButton" role="button"
        ><i class="fa fa-sort"></i
      ></a>
      <% articles.forEach(article => { %>
      <div class="card mt-4 p-4">
        <div class="class-body">
          <a href="articles/<%= article.link %>" class="card-title my-link"
            ><h4><%= article.title %></h4></a
          >
          <div class="card-subtitle text-muted mb-2">
            <%= article.createdAt.toLocaleDateString() %>
          </div>
          <div class="card-text mb-2"><%= article.description %></div>
          <a href="articles/edit/<%= article.id %>" class="btn btn-info"
            ><i class="fa fa-edit"></i
          ></a>
          <form
            action="/articles/<%= article.id %>?_method=DELETE"
            method="POST"
            class="d-inline"
          >
            <button type="submit" class="btn btn-danger">
              <i class="fa fa-trash"></i>
            </button>
          </form>
        </div>
      </div>
      <% }) %>
    </div>
    <a href="/articles/new" class="float btn-success">
      <i class="fa fa-plus my-float"></i>
    </a>
    <%- include('_footer') %>
  </body>
  <script>
    // const sortButton = document.getElementById("sortButton");
    // function MyFunction() {
    //   sortButton.classList.toggle("rev");
    //   if (sortButton.classList.contains("rev")) {
    //     sortButton.setAttribute("href", "/?rev=1");
    //   } else {
    //     sortButton.setAttribute("href", "/");
    //   }
    //   alert(sortButton.classList.contains("rev"));
    //   console.log(sortButton.classList.contains("rev"));
    // }

    // sortButton.addEventListener("click", (e) => {
    //   sortButton.classList.toggle("rev");
    //   if (sortButton.classList.contains("rev")) {
    //     sortButton.setAttribute("href", "/?rev=1");
    //   } else {
    //     sortButton.setAttribute("href", "/");
    //   }
    //   console.log(sortButton.classList.entries);
    //   console.log(sortButton.classList.contains("rev"));
    // });
  </script>
</html>
